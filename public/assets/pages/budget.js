$(function(){$(".transactions").hide(),$(document).on("click","a.add-item, a.add-transaction, a.edit-transaction, a.edit-item",function(t){var a=$(this),n=$("<div></div>").addClass("modal hide fade");n.load(a.attr("href")+" .form-box > *",function(){$(".modal input.date").datepicker({dateFormat:"dd/mm/yy"})}).appendTo("body").modal().modal("show").on("hidden",function(){$(".modal input.date").datepicker("destroy"),$(this).remove()}),(a.hasClass("add-transaction")||a.hasClass("edit-transaction"))&&n.attr("data-transactions",a.parents(".item").data("id")),t.preventDefault()}).on("submit",".modal form",function(t){var a=$(this),n=a.serialize();$.ajax({type:a.attr("method"),url:a.attr("action"),data:n,complete:function(t){var n=$(t.responseText),i=a.parents(".modal");i.html("").append(n.find(".form-box > *")),201==t.status&&(i.modal("hide"),$("#content > .container").load(window.location+" #content > .container",function(){if($(".transactions").hide(),i.data("transactions")){var t=$(".item[data-id='"+i.data("transactions")+"']");t.find(".transactions").show(),t.find(".toggle-transactions").addClass("active")}}))}}),t.preventDefault()}).on("click",".toggle-transactions",function(t){$(".toggle-transactions.active").not(this).toggleClass("active").parents(".item").find(".transactions").toggle(),$(this).toggleClass("active").parents(".item").find(".transactions").toggle(),t.preventDefault()})});